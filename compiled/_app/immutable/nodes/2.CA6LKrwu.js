import"../chunks/DsnmJJEf.js";import"../chunks/Bkhe4LAc.js";import{o as ye,a as Qe}from"../chunks/BNJTat74.js";import{y as Ne,z as Xe,g as v,Z as je,O as ea,I as aa,af as Ze,ag as ra,M as we,ah as ie,ai as Ce,w as R,J as $e,L as ta,aj as sa,ak as pe,K as He,al as la,am as na,B as oa,an as ia,ao as da,ap as ca,E as ue,A as va,x as ga,a1 as pa,Q as ua,R as fa,S as Me,D as fe,F as oe,C as ha,aq as ma,T as wa,i as B,p as U,ar as W,t as Y,m as E,n as J,ab as Q,as as Ie,j as te,s as P,b as Se,v as re,$ as S,aa as z,o as T,G as ae,k as K,q as y,a9 as xa,_ as ba,at as ke,au as he}from"../chunks/C5iT9OoL.js";import{p as X,i as V,b as De}from"../chunks/DgXXG9Ni.js";import{i as Ae}from"../chunks/BCvF5oh-.js";/* empty css                */function _a(s,t,e){for(var r=s.items,a=[],l=t.length,o=0;o<l;o++)ia(t[o].e,a,!0);var i=l>0&&a.length===0&&e!==null;if(i){var q=e.parentNode;da(q),q.append(e),r.clear(),G(s,t[0].prev,t[l-1].next)}ca(a,()=>{for(var f=0;f<l;f++){var _=t[f];i||(r.delete(_.k),G(s,_.prev,_.next)),He(_.e,!i)}})}function ya(s,t,e,r,a,l=null){var o=s,i={flags:t,items:new Map,first:null};{var q=s;o=R?ue(va(q)):q.appendChild(Ne())}R&&ga();var f=null,_=!1,k=new Map,d=je(()=>{var g=e();return ra(g)?g:g==null?[]:Ze(g)}),h,c;function u(){qa(c,h,i,k,o,a,t,r,e),l!==null&&(h.length===0?f?$e(f):f=we(()=>l(o)):f!==null&&ta(f,()=>{f=null}))}Xe(()=>{c??=pa,h=v(d);var g=h.length;if(_&&g===0)return;_=g===0;let Z=!1;if(R){var $=ua(o)===fa;$!==(g===0)&&(o=Me(),ue(o),fe(!1),Z=!0)}if(R){for(var m=null,D,x=0;x<g;x++){if(oe.nodeType===ha&&oe.data===ma){o=oe,Z=!0,fe(!1);break}var L=h[x],H=r(L,x);D=xe(oe,i,m,null,L,H,x,a,t,e),i.items.set(H,D),m=D}g>0&&ue(Me())}if(R)g===0&&l&&(f=we(()=>l(o)));else if(ea()){var w=new Set,b=aa;for(x=0;x<g;x+=1){L=h[x],H=r(L,x);var I=i.items.get(H)??k.get(H);I||(D=xe(null,i,null,null,L,H,x,a,t,e,!0),k.set(H,D)),w.add(H)}for(const[A,F]of i.items)w.has(A)||b.skipped_effects.add(F.e);b.oncommit(u)}else u();Z&&fe(!0),v(d)}),R&&(o=oe)}function qa(s,t,e,r,a,l,o,i,q){var f=t.length,_=e.items,k=e.first,d=k,h,c=null,u=[],g=[],Z,$,m,D;for(D=0;D<f;D+=1){if(Z=t[D],$=i(Z,D),m=_.get($),m===void 0){var x=r.get($);if(x!==void 0){r.delete($),_.set($,x);var L=c?c.next:d;G(e,c,x),G(e,x,L),me(x,L,a),c=x}else{var H=d?d.e.nodes_start:a;c=xe(H,e,c,c===null?e.first:c.next,Z,$,D,l,o,q)}_.set($,c),u=[],g=[],d=c.next;continue}if((m.e.f&pe)!==0&&$e(m.e),m!==d){if(h!==void 0&&h.has(m)){if(u.length<g.length){var w=g[0],b;c=w.prev;var I=u[0],A=u[u.length-1];for(b=0;b<u.length;b+=1)me(u[b],w,a);for(b=0;b<g.length;b+=1)h.delete(g[b]);G(e,I.prev,A.next),G(e,c,I),G(e,A,w),d=w,c=A,D-=1,u=[],g=[]}else h.delete(m),me(m,d,a),G(e,m.prev,m.next),G(e,m,c===null?e.first:c.next),G(e,c,m),c=m;continue}for(u=[],g=[];d!==null&&d.k!==$;)(d.e.f&pe)===0&&(h??=new Set).add(d),g.push(d),d=d.next;if(d===null)continue;m=d}u.push(m),c=m,d=m.next}if(d!==null||h!==void 0){for(var F=h===void 0?[]:Ze(h);d!==null;)(d.e.f&pe)===0&&F.push(d),d=d.next;var n=F.length;if(n>0){var p=f===0?a:null;_a(e,F,p)}}s.first=e.first&&e.first.e,s.last=c&&c.e;for(var C of r.values())He(C.e);r.clear()}function xe(s,t,e,r,a,l,o,i,q,f,_){var k=(q&la)!==0,d=(q&na)===0,h=k?d?ie(a,!1,!1):Ce(a):a,c=(q&sa)===0?o:Ce(o),u={i:c,v:h,k:l,a:null,e:null,prev:e,next:r};try{if(s===null){var g=document.createDocumentFragment();g.append(s=Ne())}return u.e=we(()=>i(s,h,c,f),R),u.e.prev=e&&e.e,u.e.next=r&&r.e,e===null?_||(t.first=u):(e.next=u,e.e.next=u.e),r!==null&&(r.prev=u,r.e.prev=u.e),u}finally{}}function me(s,t,e){for(var r=s.next?s.next.e.nodes_start:e,a=t?t.e.nodes_start:e,l=s.e.nodes_start;l!==null&&l!==r;){var o=oa(l);a.before(l),l=o}}function G(s,t,e){t===null?s.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function qe(s,t){wa(()=>{var e=s.getRootNode(),r=e.host?e:e.head??e.ownerDocument.head;if(!r.querySelector("#"+t.hash)){const a=document.createElement("style");a.id=t.hash,a.textContent=t.code,r.appendChild(a)}})}function Ta(s,t,e){var r=s==null?"":""+s;return t&&(r=r?r+" "+t:t),r===""?null:r}function Ea(s,t){return s==null?null:String(s)}function de(s,t,e,r,a,l){var o=s.__className;if(R||o!==e||o===void 0){var i=Ta(e,r);(!R||i!==s.getAttribute("class"))&&(i==null?s.removeAttribute("class"):s.className=i),s.__className=e}return l}function se(s,t,e,r){var a=s.__style;if(R||a!==t){var l=Ea(t);(!R||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=t}return r}var Ca=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M440-240h80v-120h120v-80H520v-120h-80v120H320v80h120v120ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"></path></svg>');function Pe(s,t){U(t,!1);let e=X(t,"scale",12,1);var r={get scale(){return e()},set scale(l){e(l),Q()}},a=Ca();return Y(()=>se(a,`transform: scale(${e()??""});`)),E(s,a),J(r)}customElements.define("icon-gensdp",B(Pe,{scale:{}},[],[],!0));var Ma=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-520q66 0 113-47t47-113v-120H320v120q0 66 47 113t113 47ZM160-80v-80h80v-120q0-61 28.5-114.5T348-480q-51-32-79.5-85.5T240-680v-120h-80v-80h640v80h-80v120q0 61-28.5 114.5T612-480q51 32 79.5 85.5T720-280v120h80v80H160Z"></path></svg>');function be(s,t){U(t,!1);let e=X(t,"scale",12,1);var r={get scale(){return e()},set scale(l){e(l),Q()}},a=Ma();return Y(()=>se(a,`transform: scale(${e()??""});`)),E(s,a),J(r)}customElements.define("icon-hourglass",B(be,{scale:{}},[],[],!0));var Sa=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-240q-97 0-166-66t-74-162l84 25q13 54 56 88.5T480-320q66 0 113-47t47-113q0-57-34.5-100T517-636l-25-84q96 5 162 74t66 166q0 100-70 170t-170 70Zm0 160q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480v-18q0-9 2-18l78 24v12q0 134 93 227t227 93q134 0 227-93t93-227q0-134-93-227t-227-93h-12l-24-78q9-2 18-2h18q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-59-380L250-631l-50 151L80-880l400 120-151 50 171 171-79 79Z"></path></svg>');function _e(s,t){U(t,!1);let e=X(t,"scale",12,1);var r={get scale(){return e()},set scale(l){e(l),Q()}},a=Sa();return Y(()=>se(a,`transform: scale(${e()??""});`)),E(s,a),J(r)}customElements.define("icon-dragclick",B(_e,{scale:{}},[],[],!0));var ka=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v240h-80v-200H520v-200H240v640h360v80H240Zm638 15L760-183v89h-80v-226h226v80h-90l118 118-56 57Zm-638-95v-640 640Z"></path></svg>');function Le(s,t){U(t,!1);let e=X(t,"scale",12,1);var r={get scale(){return e()},set scale(l){e(l),Q()}},a=ka();return Y(()=>se(a,`transform: scale(${e()??""});`)),E(s,a),J(r)}customElements.define("icon-openfile",B(Le,{scale:{}},[],[],!0));var Da=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448ZM480-480Z"></path></svg>');function ze(s,t){U(t,!1);let e=X(t,"scale",12,1);var r={get scale(){return e()},set scale(l){e(l),Q()}},a=Da();return Y(()=>se(a,`transform: scale(${e()??""})`)),E(s,a),J(r)}customElements.define("icon-block",B(ze,{scale:{}},[],[],!0));var Na=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"></path></svg>');function Be(s,t){U(t,!1);let e=X(t,"scale",12,1);var r={get scale(){return e()},set scale(l){e(l),Q()}},a=Na();return Y(()=>se(a,`transform: scale(${e()??""})`)),E(s,a),J(r)}customElements.define("icon-check",B(Be,{scale:{}},[],[],!0));var Za=te('<div class="form-container svelte-18502gt"><p class="title svelte-18502gt">Conversation</p> <hr class="sepline svelte-18502gt"/> <div class="conversation-info-form svelte-18502gt"><p class="subTitle svelte-18502gt">Title</p> <input id="title-input" placeholder="Title of the converstation goes to here..." class="svelte-18502gt"/></div> <p class="title svelte-18502gt">Generate Estac</p> <hr class="sepline svelte-18502gt"/> <div role="button" aria-labelledby="Generate SDP" tabindex=""><!> <p class="help-text svelte-18502gt"> </p></div> <p class="title svelte-18502gt">Receive Estac</p> <hr class="sepline svelte-18502gt"/> <div><!> <p class="help-text svelte-18502gt"> </p></div></div>');const $a={hash:"svelte-18502gt",code:".form-container.svelte-18502gt {padding:40px;font-size:24px;min-width:400px;width:80%;max-width:600px;align-self:center;margin:20px;border-radius:20px;background-color:var(--clr-surface-a20);}.title.svelte-18502gt {margin:0;font-size:30px;font-weight:bold;color:var(--clr-light-a0);}.sepline.svelte-18502gt {margin:0;padding:0;border-width:1px;border-color:var(--clr-light-a10);}.conversation-info-form.svelte-18502gt {margin:0;padding:10px 0px 10px 0px;width:100%;}.subTitle.svelte-18502gt {margin:0;padding:0;font-size:20px;color:var(--clr-light-a0);font-weight:bold;}#title-input.svelte-18502gt {padding:7px 10px 7px 10px;border-radius:8px;outline:none;font-size:15px;border:1px solid var(--clr-surface-tonal-a30);background-color:var(--clr-surface-a20);color:var(--clr-light-a0);width:calc(100% - 20px);align-self:center;}#title-input.svelte-18502gt:focus {border:1px solid var(--clr-primary-a0);}.gen-sdp-base.svelte-18502gt {margin:20px;border-radius:15px;height:150px;display:flex;align-items:center;justify-content:space-evenly;}.gen-sdp-enabled.svelte-18502gt {border:2px dashed var(--clr-surface-tonal-a30);cursor:pointer;background-color:var(--clr-surface-tonal-a10);color:var(--clr-surface-tonal-a30);fill:var(--clr-surface-tonal-a30);}.gen-sdp-enabled.svelte-18502gt:hover {border:2px dashed var(--clr-primary-a10);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.gen-sdp-disabled.svelte-18502gt {border:2px dashed var(--clr-surface-tonal-a30);cursor:not-allowed;background-color:var(--clr-surface-tonal-a10);color:var(--clr-surface-tonal-a30);fill:var(--clr-surface-tonal-a30);}.gen-sdp-allow-drag.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.drop-sdp-base.svelte-18502gt {margin:20px;border-radius:15px;height:150px;display:flex;align-items:center;justify-content:space-evenly;}.drop-sdp-enabled.svelte-18502gt {border:2px dashed var(--clr-surface-tonal-a30);background-color:var(--clr-surface-tonal-a10);color:var(--clr-surface-tonal-a30);fill:var(--clr-surface-tonal-a30);}.drop-sdp-illegal-drop.svelte-18502gt {cursor:not-allowed;border:2px dashed var(--clr-danger-a10);background-color:var(--clr-danger-a0);color:var(--clr-danger-a10);fill:var(--clr-danger-a10);}.drop-sdp-enabled-dragover.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.drop-sdp-disabled.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.drop-sdp-dropping.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.help-text.svelte-18502gt {font-size:18px;}"};function Re(s,t){U(t,!1),qe(s,$a);let e=X(t,"ready",12,()=>{}),r=ie("gen-sdp-enabled"),a=ie("drop-sdp-enabled"),l=null,o=!1;function i(){S(r,"gen-sdp-enabled"),S(a,"drop-sdp-enabled"),l=null,o=!1}async function q(){switch(v(r)){case"gen-sdp-enabled":{S(r,"gen-sdp-disabled"),await z(),window.logger.logMessage("[New Chat Subpage]: Generating SDP...");try{const n=await window.rtchost.bstrapConv();window.logger.logMessage(`[New Chat Subpage]: SDP generated successfully at: ${n.estac_path}.`),l=n.conv_id,S(r,"gen-sdp-allow-drag"),await z(),f(n.estac_path,v(r))}catch(n){window.logger.logMessage(`[New Chat Subpage]: Error during SDP generation: (${n.message}).`),alert(`Failed to generate the Estac file, reason: ${n.message}`),i();return}break}case"gen-sdp-disabled":{window.logger.warnMessage("[New Chat Subpage]: Generation of SDP is already disabled.");break}case"gen-sdp-allow-drag":break;default:window.logger.warnMessage("[New Chat Subpage]: Unknown SDP generation state.");return}}function f(n,p){const C=document.getElementsByClassName(p)[0];window.logger.logMessage("[New Chat Subpage]: Setting drag-and-drop for file: "+n),C.setAttribute("draggable","true"),C.addEventListener("dragstart",M=>{M.preventDefault(),window.estac.dragStart(n)})}async function _(n){S(r,"gen-sdp-disabled"),await z(),window.logger.logMessage("[New Chat Subpage]: Generating SDP, this is the first time..."),l=n.conv_id;try{const p=await window.rtchost.bstrapConvAnswer(n);window.logger.logMessage(`[New Chat Subpage]: SDP generated successfully at: ${p.estac_path}.`),S(r,"gen-sdp-allow-drag"),await z(),f(p.estac_path,v(r))}catch(p){window.logger.logMessage(`[New Chat Subpage]: Error during SDP generation on drop: ${p.message}`),alert(`Failed to generate the Estac file, reason: ${p.message}`),i();return}}async function k(n){if(window.logger.logMessage("[New Chat Subpage]: Checking validity of dropped conversation info..."),l===n.conv_id){window.logger.logMessage("[New Chat Subpage]: Valid conversation info received.");try{await window.rtchost.loadSdpAndIces(n)}catch(p){window.logger.logMessage(`[New Chat Subpage]: Error loading SDP and ICEs: ${p.message}`),alert(`Failed to load the Estac file, reason: ${p.message}`),i();return}try{await window.rtchost.newConnection(l,"chat")}catch(p){window.logger.logMessage(`[New Chat Subpage]: Error establishing new connection: ${p.message}`),alert(`Failed to establish the connection, reason: ${p.message}`),i();return}o=!0}else window.logger.logMessage("[New Chat Subpage]: Invalid conversation info received."),_(n)}function d(n){const p=document.getElementsByClassName(n)[0];window.logger.logMessage("[New Chat Subpage]: Setting drop area for receiving SDP."),p.addEventListener("dragover",async C=>{C.preventDefault(),!(v(a)==="drop-sdp-disabled"||v(a)==="drop-sdp-illegal-drop")&&(S(a,"drop-sdp-enabled-dragover"),await z())}),p.addEventListener("dragleave",async C=>{C.preventDefault(),!(v(a)==="drop-sdp-disabled"||v(a)==="drop-sdp-illegal-drop")&&(S(a,"drop-sdp-enabled"),await z())}),p.addEventListener("drop",async C=>{if(C.preventDefault(),!(v(a)==="drop-sdp-disabled"||v(a)==="drop-sdp-illegal-drop")){S(a,"drop-sdp-dropping"),await z();try{let M=null;if(C.dataTransfer.files.length>0){const O=C.dataTransfer.files[0];M=await window.estac.dropBuffer({name:O.name,data:await O.arrayBuffer()})}else{const O=C.dataTransfer.getData("text/uri-list");M=await window.estac.dropUrl(O)}if(S(a,"drop-sdp-disabled"),await z(),window.logger.logMessage(`[New Chat Subpage]: SDP dropped successfully: ${M.conv_id}.`),!M)throw new Error("No valide information obtained from dropped SDP.");v(r)==="gen-sdp-enabled"?_(M):k(M)}catch(M){window.logger.logMessage(`[New Chat Subpage]: Error during SDP drop: (${M.message})`),S(a,"drop-sdp-illegal-drop"),await z(),setTimeout(async()=>{S(a,"drop-sdp-enabled"),await z()},1e3);return}}})}function h(){switch(v(r)){case"gen-sdp-enabled":return"Click here to generate Estac file.";case"gen-sdp-disabled":return"Estac file generation in progress.";case"gen-sdp-allow-drag":return"Drag and drop the Estac file";default:return"Click here to generate Estac file."}}function c(){switch(v(a)){case"drop-sdp-enabled":return"Drop the Estac file here to receive Estac file.";case"drop-sdp-enabled-dragover":return"Release to drop the Estac file here.";case"drop-sdp-disabled":return"Estac file received successfully.";case"drop-sdp-illegal-drop":return"Wrong or corrupted file dropped.";case"drop-sdp-dropping":return"Receiving Estac file...";default:return"Drop the Estac file here."}}ye(()=>{d("drop-sdp-enabled")}),Qe(()=>{!o&&l&&window.logger.logMessage(`[New Chat Subpage]: Cleaning up invalid conversation ID: ${l}`)});var u={get ready(){return e()},set ready(n){e(n),Q()}};Ae();var g=Za(),Z=P(T(g),10);Z.__click=q,Z.__keydown=n=>n.key==="Enter"&&q();var $=T(Z);{var m=n=>{Pe(n,{scale:"2"})},D=n=>{var p=ae(),C=K(p);{var M=N=>{be(N,{scale:"2"})},O=N=>{var le=ae(),ce=K(le);{var ve=ne=>{_e(ne,{scale:"2"})};V(ce,ne=>{v(r)==="gen-sdp-allow-drag"&&ne(ve)},!0)}E(N,le)};V(C,N=>{v(r)==="gen-sdp-disabled"?N(M):N(O,!1)},!0)}E(n,p)};V($,n=>{v(r)==="gen-sdp-enabled"?n(m):n(D,!1)})}var x=P($,2),L=T(x,!0);y(x),y(Z);var H=P(Z,6),w=T(H);{var b=n=>{Le(n,{scale:"2"})},I=n=>{var p=ae(),C=K(p);{var M=N=>{_e(N,{scale:"2"})},O=N=>{var le=ae(),ce=K(le);{var ve=j=>{Be(j,{scale:"2"})},ne=j=>{var Te=ae(),Ue=K(Te);{var We=ee=>{ze(ee,{scale:"2"})},Ye=ee=>{var Ee=ae(),Je=K(Ee);{var Ke=ge=>{be(ge,{scale:"2"})};V(Je,ge=>{v(a)==="drop-sdp-dropping"&&ge(Ke)},!0)}E(ee,Ee)};V(Ue,ee=>{v(a)==="drop-sdp-illegal-drop"?ee(We):ee(Ye,!1)},!0)}E(j,Te)};V(ce,j=>{v(a)==="drop-sdp-disabled"?j(ve):j(ne,!1)},!0)}E(N,le)};V(C,N=>{v(a)==="drop-sdp-enabled-dragover"?N(M):N(O,!1)},!0)}E(n,p)};V(w,n=>{v(a)==="drop-sdp-enabled"?n(b):n(I,!1)})}var A=P(w,2),F=T(A,!0);return y(A),y(H),y(g),Y((n,p)=>{de(Z,1,`gen-sdp-base ${v(r)??""}`,"svelte-18502gt"),re(L,n),de(H,1,`drop-sdp-base ${v(a)??""}`,"svelte-18502gt"),re(F,p)},[()=>Se(h),()=>Se(c)]),E(s,g),J(u)}Ie(["click","keydown"]);customElements.define("new-chat-subpage",B(Re,{ready:{}},[],[],!0));var Ha=te("<div><div><div><b> </b> </div></div> </div>"),Ia=te('<div class="message-holder svelte-29qo5e"></div>');const Aa={hash:"svelte-29qo5e",code:".message-holder.svelte-29qo5e {display:flex;flex-direction:column;padding:10px;}.message.svelte-29qo5e {color:var(--clr-light-a0);margin-bottom:15px;padding:10px 15px;border-radius:10px;max-width:70%;font-size:18px;word-break:break-all;align-items:end;}.message-info.svelte-29qo5e {font-size:12px;color:var(--clr-primary-a0);}.local-message.svelte-29qo5e {align-self:flex-end;display:flex;flex-direction:column;}.remote-message.svelte-29qo5e {align-self:flex-start;display:flex;flex-direction:column;}"};function Fe(s,t){U(t,!0),qe(s,Aa);let e=xa(ba([]));const r={addMessage:o=>{S(e,[...v(e),o],!0),console.log("Message added to chat subpage:",o)},switchMessages:o=>{S(e,o,!0)}};ye(()=>{let o=document.querySelector(".message-holder");var i=new MutationObserver(()=>{o.scrollIntoView({behavior:"smooth",block:"end"})});i.observe(o,{childList:!0})});var a={self:r},l=Ia();return ya(l,20,()=>v(e),o=>o,(o,i)=>{var q=Ha(),f=T(q),_=T(f),k=T(_),d=T(k,!0);y(k);var h=P(k);y(_),y(f);var c=P(f);y(q),Y(()=>{de(q,1,`message ${i.isloacal===!0?"local-message":"remote-message"}`,"svelte-29qo5e"),de(f,1,`message-info ${i.isloacal===!0?"local-message":"remote-message"}`,"svelte-29qo5e"),re(d,i.isloacal===!0?"Local":"Remote"),re(h,`: ${i.time??""}`),re(c,` ${i.text??""}`)}),E(o,q)}),y(l),E(s,l),J(a)}customElements.define("chat-subpage",B(Fe,{},[],["self"],!0));var Pa=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z"></path></svg>');function Oe(s){var t=Pa();E(s,t)}customElements.define("icon-add-box",B(Oe,{},[],[],!0));var La=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff"><path d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z"></path></svg>');function Ge(s){var t=La();E(s,t)}customElements.define("icon-send",B(Ge,{},[],[],!0));var za=W('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"></path></svg>');function Ve(s){var t=za();E(s,t)}customElements.define("icon-uploadfile",B(Ve,{},[],[],!0));var Ba=te('<div class="chat-holder svelte-1uha8ag"><!></div> <div class="chat-input svelte-1uha8ag"><input type="text" placeholder="Type a message..." class="svelte-1uha8ag"/> <button style="display:flex; align-items:center;" class="svelte-1uha8ag"><!>Send File</button> <button style="display:flex; align-items:center;" class="svelte-1uha8ag"><!>Send</button></div>',1),Ra=te('<div class="newsubpage-holder svelte-1uha8ag"><!></div>'),Fa=te('<main class="svelte-1uha8ag"><div class="container svelte-1uha8ag"><div class="sidebar svelte-1uha8ag"><div class="sidebar-header svelte-1uha8ag">Web RTC</div> <div class="conversations svelte-1uha8ag"><div role="button" aria-labelledby="Load Conversations" tabindex="0" class="conversation svelte-1uha8ag">Conversation 1</div></div> <div role="button" aria-labelledby="Start New Chat" tabindex="0" class="new-chat svelte-1uha8ag"><!> <p style="horizontal-align:middle; font-size:18px;">New Chat</p></div></div> <div class="main-chat svelte-1uha8ag"><div class="chat-header svelte-1uha8ag"> </div> <!></div></div></main>');const Oa={hash:"svelte-1uha8ag",code:`main.svelte-1uha8ag {height:100%;margin:0;padding:0;}.container.svelte-1uha8ag {display:flex;height:100vh;}\r
\r
  /* Sidebar */.sidebar.svelte-1uha8ag {margin:10px;width:300px;display:flex;flex-direction:column;align-items:center;border-radius:20px;}.sidebar-header.svelte-1uha8ag {width:100%;padding:20px;font-size:20px;font-weight:bold;text-align:center;}.conversations.svelte-1uha8ag {width:100%;flex:1;overflow-y:auto;}.conversation.svelte-1uha8ag {padding:10px 15px;margin:10px;border-radius:10px;cursor:pointer;font-size:18px;}.new-chat.svelte-1uha8ag {padding:10px 15px;cursor:pointer;margin:10px;margin-right:20px;border-radius:10px;width:60%;height:24px;display:flex;justify-content:center;align-items:center;}\r
\r
  /* Main chat area */.main-chat.svelte-1uha8ag {flex:1;display:flex;flex-direction:column;overflow:hidden;}.chat-header.svelte-1uha8ag {margin:10px;border-radius:20px;padding:20px;font-weight:bold;font-size:20px;}.chat-holder.svelte-1uha8ag {flex:1;padding:20px;overflow-y:auto;}.chat-input.svelte-1uha8ag {padding:15px 20px;display:flex;font-size:16px;}.chat-input.svelte-1uha8ag input:where(.svelte-1uha8ag) {flex:1;padding:10px 15px;border-radius:20px;outline:none;font-size:16px;}.chat-input.svelte-1uha8ag button:where(.svelte-1uha8ag) {margin-left:10px;padding:10px 20px;border:none;border-radius:20px;cursor:pointer;font-size:16px;}.newsubpage-holder.svelte-1uha8ag {margin:0;padding:0;overflow-y:auto;width:100%;display:flex;align-items:center;justify-content:center;}`};function Ga(s,t){U(t,!1),qe(s,Oa);const e={loaded:!1,conversation_name:"New Chat",conversation_id:null};let r=ie(structuredClone(e)),a=ie(),l;ye(()=>{window.logger.logMessage("[Main Page]: Main page mounted")});function o(){S(r,structuredClone(e))}async function i(){let w=document.querySelector(".chat-input input"),b=w.value;if(b.trim()==="")return;await z(),l=v(a).self;let I=Date.now();const A={id:I,time:new Date(I).toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!1}),text:b,isloacal:!0};if(l&&l.addMessage)l.addMessage(A);else throw window.logger.logMessage(`[Main Page]: Unable to load message on the chat
      subpage: subpage reference is not defined`),new Error("Chat subpage reference is not defined");w.value=""}let q=`Lorem ipsum dolor sit amet,
  consectetur adipiscing elit, sed do eiusmod
  tempor incididunt ut labore et dolore magna aliqua.
  Ut enim ad minim veniam, quis nostrud exercitation ullamco
  laboris nisi ut aliquip ex ea commodo consequat. Duis
  aute irure dolor in reprehenderit in voluptate velit esse
  cillum dolore eu fugiat nulla pariatur. Excepteur sint
  occaecat cupidatat non proident, sunt in culpa qui
  officia deserunt mollit anim id est laborum.`;async function f(){let w=[{id:"1",text:q,isloacal:!1},{id:"2",text:"Hi! How are you?",isloacal:!0}];ke(r,v(r).loaded=!0),ke(r,v(r).conversation_name="Conversation 1"),await z(),l=v(a).self,l&&l.switchMessages?l.switchMessages(w):console.error("switchMessagesRef is not defined")}function _(){S(r,structuredClone(e))}Ae();var k=Fa(),d=T(k),h=T(d),c=P(T(h),2),u=T(c);u.__click=f,u.__keydown=w=>w.key==="Enter"&&f(),y(c);var g=P(c,2);g.__click=_,g.__keydown=w=>w.key==="Enter"&&_();var Z=T(g);Oe(Z),he(2),y(g),y(h);var $=P(h,2),m=T($),D=T(m,!0);y(m);var x=P(m,2);{var L=w=>{var b=Ba(),I=K(b),A=T(I);De(Fe(A,{$$legacy:!0}),N=>S(a,N),()=>v(a)),y(I);var F=P(I,2),n=T(F);n.__keydown=N=>N.key==="Enter"&&i();var p=P(n,2);p.__click=i;var C=T(p);Ve(C),he(),y(p);var M=P(p,2);M.__click=i;var O=T(M);Ge(O),he(),y(M),y(F),E(w,b)},H=w=>{var b=Ra(),I=T(b);De(Re(I,{ready:o,$$legacy:!0}),A=>S(a,A),()=>v(a)),y(b),E(w,b)};V(x,w=>{v(r).loaded?w(L):w(H,!1)})}y($),y(d),y(k),Y(()=>re(D,v(r).conversation_name)),E(s,k),J()}Ie(["click","keydown"]);B(Ga,{},[],[],!0);export{Ga as component};
