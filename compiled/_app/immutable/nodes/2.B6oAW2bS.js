import"../chunks/DsnmJJEf.js";import"../chunks/Bkhe4LAc.js";import{o as be,a as Ye}from"../chunks/BNJTat74.js";import{y as Se,z as Je,g as v,Z as Ke,O as Qe,I as Xe,af as ke,ag as je,M as he,ah as ne,ai as Te,w as R,J as De,L as ea,aj as aa,ak as ve,K as Ne,al as ta,am as ra,B as sa,an as la,ao as na,ap as oa,E as ge,A as ia,x as da,a1 as ca,Q as va,R as ga,S as Ee,D as pe,F as le,C as pa,aq as ua,T as fa,i as B,p as F,ar as U,t as W,m as M,n as Y,ab as ee,as as Ze,j as ae,s as P,v as j,$ as S,aa as z,o as E,G as X,k as J,q as T,a9 as ha,_ as wa,at as Me,au as ue}from"../chunks/C5iT9OoL.js";import{p as te,i as V,b as Ce}from"../chunks/DgXXG9Ni.js";import{i as He}from"../chunks/BCvF5oh-.js";/* empty css                */function ma(r,t,e){for(var a=r.items,s=[],l=t.length,o=0;o<l;o++)la(t[o].e,s,!0);var g=l>0&&s.length===0&&e!==null;if(g){var _=e.parentNode;na(_),_.append(e),a.clear(),O(r,t[0].prev,t[l-1].next)}oa(s,()=>{for(var h=0;h<l;h++){var y=t[h];g||(a.delete(y.k),O(r,y.prev,y.next)),Ne(y.e,!g)}})}function xa(r,t,e,a,s,l=null){var o=r,g={flags:t,items:new Map,first:null};{var _=r;o=R?ge(ia(_)):_.appendChild(Se())}R&&da();var h=null,y=!1,N=new Map,i=Ke(()=>{var u=e();return je(u)?u:u==null?[]:ke(u)}),w,d;function c(){ba(d,w,g,N,o,s,t,a,e),l!==null&&(w.length===0?h?De(h):h=he(()=>l(o)):h!==null&&ea(h,()=>{h=null}))}Je(()=>{d??=ca,w=v(i);var u=w.length;if(y&&u===0)return;y=u===0;let A=!1;if(R){var Z=va(o)===ga;Z!==(u===0)&&(o=Ee(),ge(o),pe(!1),A=!0)}if(R){for(var m=null,D,x=0;x<u;x++){if(le.nodeType===pa&&le.data===ua){o=le,A=!0,pe(!1);break}var I=w[x],f=a(I,x);D=we(le,g,m,null,I,f,x,s,t,e),g.items.set(f,D),m=D}u>0&&ge(Ee())}if(R)u===0&&l&&(h=he(()=>l(o)));else if(Qe()){var C=new Set,b=Xe;for(x=0;x<u;x+=1){I=w[x],f=a(I,x);var L=g.items.get(f)??N.get(f);L||(D=we(null,g,null,null,I,f,x,s,t,e,!0),N.set(f,D)),C.add(f)}for(const[n,p]of g.items)C.has(n)||b.skipped_effects.add(p.e);b.oncommit(c)}else c();A&&pe(!0),v(i)}),R&&(o=le)}function ba(r,t,e,a,s,l,o,g,_){var h=t.length,y=e.items,N=e.first,i=N,w,d=null,c=[],u=[],A,Z,m,D;for(D=0;D<h;D+=1){if(A=t[D],Z=g(A,D),m=y.get(Z),m===void 0){var x=a.get(Z);if(x!==void 0){a.delete(Z),y.set(Z,x);var I=d?d.next:i;O(e,d,x),O(e,x,I),fe(x,I,s),d=x}else{var f=i?i.e.nodes_start:s;d=we(f,e,d,d===null?e.first:d.next,A,Z,D,l,o,_)}y.set(Z,d),c=[],u=[],i=d.next;continue}if((m.e.f&ve)!==0&&De(m.e),m!==i){if(w!==void 0&&w.has(m)){if(c.length<u.length){var C=u[0],b;d=C.prev;var L=c[0],n=c[c.length-1];for(b=0;b<c.length;b+=1)fe(c[b],C,s);for(b=0;b<u.length;b+=1)w.delete(u[b]);O(e,L.prev,n.next),O(e,d,L),O(e,n,C),i=C,d=n,D-=1,c=[],u=[]}else w.delete(m),fe(m,i,s),O(e,m.prev,m.next),O(e,m,d===null?e.first:d.next),O(e,d,m),d=m;continue}for(c=[],u=[];i!==null&&i.k!==Z;)(i.e.f&ve)===0&&(w??=new Set).add(i),u.push(i),i=i.next;if(i===null)continue;m=i}c.push(m),d=m,i=m.next}if(i!==null||w!==void 0){for(var p=w===void 0?[]:ke(w);i!==null;)(i.e.f&ve)===0&&p.push(i),i=i.next;var q=p.length;if(q>0){var k=h===0?s:null;ma(e,p,k)}}r.first=e.first&&e.first.e,r.last=d&&d.e;for(var $ of a.values())Ne($.e);a.clear()}function we(r,t,e,a,s,l,o,g,_,h,y){var N=(_&ta)!==0,i=(_&ra)===0,w=N?i?ne(s,!1,!1):Te(s):s,d=(_&aa)===0?o:Te(o),c={i:d,v:w,k:l,a:null,e:null,prev:e,next:a};try{if(r===null){var u=document.createDocumentFragment();u.append(r=Se())}return c.e=he(()=>g(r,w,d,h),R),c.e.prev=e&&e.e,c.e.next=a&&a.e,e===null?y||(t.first=c):(e.next=c,e.e.next=c.e),a!==null&&(a.prev=c,a.e.prev=c.e),c}finally{}}function fe(r,t,e){for(var a=r.next?r.next.e.nodes_start:e,s=t?t.e.nodes_start:e,l=r.e.nodes_start;l!==null&&l!==a;){var o=sa(l);s.before(l),l=o}}function O(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function _e(r,t){fa(()=>{var e=r.getRootNode(),a=e.host?e:e.head??e.ownerDocument.head;if(!a.querySelector("#"+t.hash)){const s=document.createElement("style");s.id=t.hash,s.textContent=t.code,a.appendChild(s)}})}function _a(r,t,e){var a=r==null?"":""+r;return t&&(a=a?a+" "+t:t),a===""?null:a}function ya(r,t){return r==null?null:String(r)}function oe(r,t,e,a,s,l){var o=r.__className;if(R||o!==e||o===void 0){var g=_a(e,a);(!R||g!==r.getAttribute("class"))&&(g==null?r.removeAttribute("class"):r.className=g),r.__className=e}return l}function re(r,t,e,a){var s=r.__style;if(R||s!==t){var l=ya(t);(!R||l!==r.getAttribute("style"))&&(l==null?r.removeAttribute("style"):r.style.cssText=l),r.__style=t}return a}var qa=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M440-240h80v-120h120v-80H520v-120h-80v120H320v80h120v120ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"></path></svg>');function $e(r,t){F(t,!1);let e=te(t,"scale",12,1);var a={get scale(){return e()},set scale(l){e(l),ee()}},s=qa();return W(()=>re(s,`transform: scale(${e()??""});`)),M(r,s),Y(a)}customElements.define("icon-gensdp",B($e,{scale:{}},[],[],!0));var Ta=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-520q66 0 113-47t47-113v-120H320v120q0 66 47 113t113 47ZM160-80v-80h80v-120q0-61 28.5-114.5T348-480q-51-32-79.5-85.5T240-680v-120h-80v-80h640v80h-80v120q0 61-28.5 114.5T612-480q51 32 79.5 85.5T720-280v120h80v80H160Z"></path></svg>');function me(r,t){F(t,!1);let e=te(t,"scale",12,1);var a={get scale(){return e()},set scale(l){e(l),ee()}},s=Ta();return W(()=>re(s,`transform: scale(${e()??""});`)),M(r,s),Y(a)}customElements.define("icon-hourglass",B(me,{scale:{}},[],[],!0));var Ea=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-240q-97 0-166-66t-74-162l84 25q13 54 56 88.5T480-320q66 0 113-47t47-113q0-57-34.5-100T517-636l-25-84q96 5 162 74t66 166q0 100-70 170t-170 70Zm0 160q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480v-18q0-9 2-18l78 24v12q0 134 93 227t227 93q134 0 227-93t93-227q0-134-93-227t-227-93h-12l-24-78q9-2 18-2h18q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-59-380L250-631l-50 151L80-880l400 120-151 50 171 171-79 79Z"></path></svg>');function xe(r,t){F(t,!1);let e=te(t,"scale",12,1);var a={get scale(){return e()},set scale(l){e(l),ee()}},s=Ea();return W(()=>re(s,`transform: scale(${e()??""});`)),M(r,s),Y(a)}customElements.define("icon-dragclick",B(xe,{scale:{}},[],[],!0));var Ma=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v240h-80v-200H520v-200H240v640h360v80H240Zm638 15L760-183v89h-80v-226h226v80h-90l118 118-56 57Zm-638-95v-640 640Z"></path></svg>');function Ie(r,t){F(t,!1);let e=te(t,"scale",12,1);var a={get scale(){return e()},set scale(l){e(l),ee()}},s=Ma();return W(()=>re(s,`transform: scale(${e()??""});`)),M(r,s),Y(a)}customElements.define("icon-openfile",B(Ie,{scale:{}},[],[],!0));var Ca=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448ZM480-480Z"></path></svg>');function Pe(r,t){F(t,!1);let e=te(t,"scale",12,1);var a={get scale(){return e()},set scale(l){e(l),ee()}},s=Ca();return W(()=>re(s,`transform: scale(${e()??""})`)),M(r,s),Y(a)}customElements.define("icon-block",B(Pe,{scale:{}},[],[],!0));var Sa=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"></path></svg>');function Ae(r,t){F(t,!1);let e=te(t,"scale",12,1);var a={get scale(){return e()},set scale(l){e(l),ee()}},s=Sa();return W(()=>re(s,`transform: scale(${e()??""})`)),M(r,s),Y(a)}customElements.define("icon-check",B(Ae,{scale:{}},[],[],!0));var ka=ae('<div class="form-container svelte-18502gt"><p class="title svelte-18502gt">Conversation</p> <hr class="sepline svelte-18502gt"/> <div class="conversation-info-form svelte-18502gt"><p class="subTitle svelte-18502gt">Title</p> <input id="title-input" placeholder="Title of the converstation goes to here..." class="svelte-18502gt"/></div> <p class="title svelte-18502gt">Generate Estac</p> <hr class="sepline svelte-18502gt"/> <div role="button" aria-labelledby="Generate SDP" tabindex=""><!> <p class="help-text svelte-18502gt"> </p></div> <p class="title svelte-18502gt">Receive Estac</p> <hr class="sepline svelte-18502gt"/> <div><!> <p class="help-text svelte-18502gt"> </p></div></div>');const Da={hash:"svelte-18502gt",code:".form-container.svelte-18502gt {padding:40px;font-size:24px;min-width:400px;width:80%;max-width:600px;align-self:center;margin:20px;border-radius:20px;background-color:var(--clr-surface-a20);}.title.svelte-18502gt {margin:0;font-size:30px;font-weight:bold;color:var(--clr-light-a0);}.sepline.svelte-18502gt {margin:0;padding:0;border-width:1px;border-color:var(--clr-light-a10);}.conversation-info-form.svelte-18502gt {margin:0;padding:10px 0px 10px 0px;width:100%;}.subTitle.svelte-18502gt {margin:0;padding:0;font-size:20px;color:var(--clr-light-a0);font-weight:bold;}#title-input.svelte-18502gt {padding:7px 10px 7px 10px;border-radius:8px;outline:none;font-size:15px;border:1px solid var(--clr-surface-tonal-a30);background-color:var(--clr-surface-a20);color:var(--clr-light-a0);width:calc(100% - 20px);align-self:center;}#title-input.svelte-18502gt:focus {border:1px solid var(--clr-primary-a0);}.gen-sdp-base.svelte-18502gt {margin:20px;border-radius:15px;height:150px;display:flex;align-items:center;justify-content:space-evenly;}.gen-sdp-enabled.svelte-18502gt {border:2px dashed var(--clr-surface-tonal-a30);cursor:pointer;background-color:var(--clr-surface-tonal-a10);color:var(--clr-surface-tonal-a30);fill:var(--clr-surface-tonal-a30);}.gen-sdp-enabled.svelte-18502gt:hover {border:2px dashed var(--clr-primary-a10);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.gen-sdp-disabled.svelte-18502gt {border:2px dashed var(--clr-surface-tonal-a30);cursor:not-allowed;background-color:var(--clr-surface-tonal-a10);color:var(--clr-surface-tonal-a30);fill:var(--clr-surface-tonal-a30);}.gen-sdp-allow-drag.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.drop-sdp-base.svelte-18502gt {margin:20px;border-radius:15px;height:150px;display:flex;align-items:center;justify-content:space-evenly;}.drop-sdp-enabled.svelte-18502gt {border:2px dashed var(--clr-surface-tonal-a30);background-color:var(--clr-surface-tonal-a10);color:var(--clr-surface-tonal-a30);fill:var(--clr-surface-tonal-a30);}.drop-sdp-illegal-drop.svelte-18502gt {cursor:not-allowed;border:2px dashed var(--clr-danger-a10);background-color:var(--clr-danger-a0);color:var(--clr-danger-a10);fill:var(--clr-danger-a10);}.drop-sdp-enabled-dragover.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.drop-sdp-disabled.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.drop-sdp-dropping.svelte-18502gt {border:2px dashed var(--clr-primary-a30);background-color:var(--clr-surface-tonal-a20);color:var(--clr-primary-a30);fill:var(--clr-primary-a30);}.help-text.svelte-18502gt {font-size:18px;}"};function Le(r,t){F(t,!1),_e(r,Da);let e=ne("gen-sdp-enabled"),a=ne("drop-sdp-enabled"),s=null,l=!1;function o(){S(e,"gen-sdp-enabled"),S(a,"drop-sdp-enabled"),s=null,l=!1}async function g(){switch(v(e)){case"gen-sdp-enabled":{S(e,"gen-sdp-disabled"),await z(),window.logger.logMessage("[New Chat Subpage]: Generating SDP...");try{const n=await window.rtchost.bstrapConv();window.logger.logMessage(`[New Chat Subpage]: SDP generated successfully at: ${n.estac_path}.`),s=n.conv_id,S(e,"gen-sdp-allow-drag"),await z(),_(n.estac_path,v(e))}catch(n){window.logger.logMessage(`[New Chat Subpage]: Error during SDP generation: ${n}`),S(e,"gen-sdp-enabled");return}break}case"gen-sdp-disabled":{window.logger.warnMessage("[New Chat Subpage]: Generation of SDP is already disabled.");break}case"gen-sdp-allow-drag":break;default:window.logger.warnMessage("[New Chat Subpage]: Unknown SDP generation state.");return}}function _(n,p){const q=document.getElementsByClassName(p)[0];window.logger.logMessage("[New Chat Subpage]: Setting drag-and-drop for file: "+n),q.setAttribute("draggable","true"),q.addEventListener("dragstart",k=>{k.preventDefault(),window.estac.dragStart(n)})}async function h(n){S(e,"gen-sdp-disabled"),await z(),window.logger.logMessage("[New Chat Subpage]: Generating SDP, this is the first time..."),s=n.conv_id;try{const p=await window.rtchost.bstrapConvAnswer(n);window.logger.logMessage(`[New Chat Subpage]: SDP generated successfully at: ${p.estac_path}.`),S(e,"gen-sdp-allow-drag"),await z(),_(p.estac_path,v(e))}catch(p){window.logger.logMessage(`[New Chat Subpage]: Error during SDP generation on drop: ${p}`),S(e,"gen-sdp-enabled");return}}async function y(n){if(window.logger.logMessage("[New Chat Subpage]: Checking validity of dropped conversation info..."),s===n.conv_id){window.logger.logMessage("[New Chat Subpage]: Valid conversation info received."),l=!0;try{await window.rtchost.loadSdpAndIces(n)}catch(p){window.logger.logMessage(`[New Chat Subpage]: Error loading SDP and ICEs: ${p}`),await alert("Failed to load the dropped Estac file. Please try again."),o();return}await window.rtchost.newConnection(s,"chat")}else window.logger.logMessage("[New Chat Subpage]: Invalid conversation info received."),h(n)}function N(n){const p=document.getElementsByClassName(n)[0];window.logger.logMessage("[New Chat Subpage]: Setting drop area for receiving SDP."),p.addEventListener("dragover",async q=>{q.preventDefault(),!(v(a)==="drop-sdp-disabled"||v(a)==="drop-sdp-illegal-drop")&&(S(a,"drop-sdp-enabled-dragover"),await z())}),p.addEventListener("dragleave",async q=>{q.preventDefault(),!(v(a)==="drop-sdp-disabled"||v(a)==="drop-sdp-illegal-drop")&&(S(a,"drop-sdp-enabled"),await z())}),p.addEventListener("drop",async q=>{if(q.preventDefault(),!(v(a)==="drop-sdp-disabled"||v(a)==="drop-sdp-illegal-drop")){S(a,"drop-sdp-dropping"),await z();try{let k=null;if(q.dataTransfer.files.length>0){const $=q.dataTransfer.files[0];k=await window.estac.dropBuffer({name:$.name,data:await $.arrayBuffer()})}else{const $=q.dataTransfer.getData("text/uri-list");k=await window.estac.dropUrl($)}if(S(a,"drop-sdp-disabled"),await z(),window.logger.logMessage(`[New Chat Subpage]: SDP dropped successfully: ${k.conv_id}.`),!k)throw new Error("No valide information obtained from dropped SDP.");v(e)==="gen-sdp-enabled"?h(k):y(k)}catch(k){window.logger.logMessage(`[New Chat Subpage]: Error during SDP drop: (${k})`),S(a,"drop-sdp-illegal-drop"),await z(),setTimeout(async()=>{S(a,"drop-sdp-enabled"),await z()},1e3);return}}})}function i(){switch(v(e)){case"gen-sdp-enabled":return"Click here to generate Estac file.";case"gen-sdp-disabled":return"Estac file generation in progress.";case"gen-sdp-allow-drag":return"Drag and drop the Estac file";default:return"Click here to generate Estac file."}}function w(){switch(v(a)){case"drop-sdp-enabled":return"Drop the Estac file here to receive Estac file.";case"drop-sdp-enabled-dragover":return"Release to drop the Estac file here.";case"drop-sdp-disabled":return"Estac file received successfully.";case"drop-sdp-illegal-drop":return"Wrong or corrupted file dropped.";case"drop-sdp-dropping":return"Receiving Estac file...";default:return"Drop the Estac file here."}}be(()=>{N("drop-sdp-enabled")}),Ye(()=>{!l&&s&&window.logger.logMessage(`[New Chat Subpage]: Cleaning up invalid conversation ID: ${s}`)}),He();var d=ka(),c=P(E(d),10);c.__click=g,c.__keydown=n=>n.key==="Enter"&&g();var u=E(c);{var A=n=>{$e(n,{scale:"2"})},Z=n=>{var p=X(),q=J(p);{var k=H=>{me(H,{scale:"2"})},$=H=>{var G=X(),ie=J(G);{var de=se=>{xe(se,{scale:"2"})};V(ie,se=>{v(e)==="gen-sdp-allow-drag"&&se(de)},!0)}M(H,G)};V(q,H=>{v(e)==="gen-sdp-disabled"?H(k):H($,!1)},!0)}M(n,p)};V(u,n=>{v(e)==="gen-sdp-enabled"?n(A):n(Z,!1)})}var m=P(u,2),D=E(m,!0);T(m),T(c);var x=P(c,6),I=E(x);{var f=n=>{Ie(n,{scale:"2"})},C=n=>{var p=X(),q=J(p);{var k=H=>{xe(H,{scale:"2"})},$=H=>{var G=X(),ie=J(G);{var de=K=>{Ae(K,{scale:"2"})},se=K=>{var ye=X(),Ge=J(ye);{var Ve=Q=>{Pe(Q,{scale:"2"})},Fe=Q=>{var qe=X(),Ue=J(qe);{var We=ce=>{me(ce,{scale:"2"})};V(Ue,ce=>{v(a)==="drop-sdp-dropping"&&ce(We)},!0)}M(Q,qe)};V(Ge,Q=>{v(a)==="drop-sdp-illegal-drop"?Q(Ve):Q(Fe,!1)},!0)}M(K,ye)};V(ie,K=>{v(a)==="drop-sdp-disabled"?K(de):K(se,!1)},!0)}M(H,G)};V(q,H=>{v(a)==="drop-sdp-enabled-dragover"?H(k):H($,!1)},!0)}M(n,p)};V(I,n=>{v(a)==="drop-sdp-enabled"?n(f):n(C,!1)})}var b=P(I,2),L=E(b,!0);T(b),T(x),T(d),W((n,p)=>{oe(c,1,`gen-sdp-base ${v(e)??""}`,"svelte-18502gt"),j(D,n),oe(x,1,`drop-sdp-base ${v(a)??""}`,"svelte-18502gt"),j(L,p)},[i,w]),M(r,d),Y()}Ze(["click","keydown"]);customElements.define("new-chat-subpage",B(Le,{},[],[],!0));var Na=ae("<div><div><div><b> </b> </div></div> </div>"),Za=ae('<div class="message-holder svelte-29qo5e"></div>');const Ha={hash:"svelte-29qo5e",code:".message-holder.svelte-29qo5e {display:flex;flex-direction:column;padding:10px;}.message.svelte-29qo5e {color:var(--clr-light-a0);margin-bottom:15px;padding:10px 15px;border-radius:10px;max-width:70%;font-size:18px;word-break:break-all;align-items:end;}.message-info.svelte-29qo5e {font-size:12px;color:var(--clr-primary-a0);}.local-message.svelte-29qo5e {align-self:flex-end;display:flex;flex-direction:column;}.remote-message.svelte-29qo5e {align-self:flex-start;display:flex;flex-direction:column;}"};function ze(r,t){F(t,!0),_e(r,Ha);let e=ha(wa([]));const a={addMessage:o=>{S(e,[...v(e),o],!0),console.log("Message added to chat subpage:",o)},switchMessages:o=>{S(e,o,!0)}};be(()=>{let o=document.querySelector(".message-holder");var g=new MutationObserver(()=>{o.scrollIntoView({behavior:"smooth",block:"end"})});g.observe(o,{childList:!0})});var s={self:a},l=Za();return xa(l,20,()=>v(e),o=>o,(o,g)=>{var _=Na(),h=E(_),y=E(h),N=E(y),i=E(N,!0);T(N);var w=P(N);T(y),T(h);var d=P(h);T(_),W(()=>{oe(_,1,`message ${g.isloacal===!0?"local-message":"remote-message"}`,"svelte-29qo5e"),oe(h,1,`message-info ${g.isloacal===!0?"local-message":"remote-message"}`,"svelte-29qo5e"),j(i,g.isloacal===!0?"Local":"Remote"),j(w,`: ${g.time??""}`),j(d,` ${g.text??""}`)}),M(o,_)}),T(l),M(r,l),Y(s)}customElements.define("chat-subpage",B(ze,{},[],["self"],!0));var $a=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z"></path></svg>');function Be(r){var t=$a();M(r,t)}customElements.define("icon-add-box",B(Be,{},[],[],!0));var Ia=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff"><path d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z"></path></svg>');function Re(r){var t=Ia();M(r,t)}customElements.define("icon-send",B(Re,{},[],[],!0));var Pa=U('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"></path></svg>');function Oe(r){var t=Pa();M(r,t)}customElements.define("icon-uploadfile",B(Oe,{},[],[],!0));var Aa=ae('<div class="chat-holder svelte-1uha8ag"><!></div> <div class="chat-input svelte-1uha8ag"><input type="text" placeholder="Type a message..." class="svelte-1uha8ag"/> <button style="display:flex; align-items:center;" class="svelte-1uha8ag"><!>Send File</button> <button style="display:flex; align-items:center;" class="svelte-1uha8ag"><!>Send</button></div>',1),La=ae('<div class="newsubpage-holder svelte-1uha8ag"><!></div>'),za=ae('<main class="svelte-1uha8ag"><div class="container svelte-1uha8ag"><div class="sidebar svelte-1uha8ag"><div class="sidebar-header svelte-1uha8ag">Web RTC</div> <div class="conversations svelte-1uha8ag"><div role="button" aria-labelledby="Load Conversations" tabindex="0" class="conversation svelte-1uha8ag">Conversation 1</div></div> <div role="button" aria-labelledby="Start New Chat" tabindex="0" class="new-chat svelte-1uha8ag"><!> <p style="horizontal-align:middle; font-size:18px;">New Chat</p></div></div> <div class="main-chat svelte-1uha8ag"><div class="chat-header svelte-1uha8ag"> </div> <!></div></div></main>');const Ba={hash:"svelte-1uha8ag",code:`main.svelte-1uha8ag {height:100%;margin:0;padding:0;}.container.svelte-1uha8ag {display:flex;height:100vh;}\r
\r
  /* Sidebar */.sidebar.svelte-1uha8ag {margin:10px;width:300px;display:flex;flex-direction:column;align-items:center;border-radius:20px;}.sidebar-header.svelte-1uha8ag {width:100%;padding:20px;font-size:20px;font-weight:bold;text-align:center;}.conversations.svelte-1uha8ag {width:100%;flex:1;overflow-y:auto;}.conversation.svelte-1uha8ag {padding:10px 15px;margin:10px;border-radius:10px;cursor:pointer;font-size:18px;}.new-chat.svelte-1uha8ag {padding:10px 15px;cursor:pointer;margin:10px;margin-right:20px;border-radius:10px;width:60%;height:24px;display:flex;justify-content:center;align-items:center;}\r
\r
  /* Main chat area */.main-chat.svelte-1uha8ag {flex:1;display:flex;flex-direction:column;overflow:hidden;}.chat-header.svelte-1uha8ag {margin:10px;border-radius:20px;padding:20px;font-weight:bold;font-size:20px;}.chat-holder.svelte-1uha8ag {flex:1;padding:20px;overflow-y:auto;}.chat-input.svelte-1uha8ag {padding:15px 20px;display:flex;font-size:16px;}.chat-input.svelte-1uha8ag input:where(.svelte-1uha8ag) {flex:1;padding:10px 15px;border-radius:20px;outline:none;font-size:16px;}.chat-input.svelte-1uha8ag button:where(.svelte-1uha8ag) {margin-left:10px;padding:10px 20px;border:none;border-radius:20px;cursor:pointer;font-size:16px;}.newsubpage-holder.svelte-1uha8ag {margin:0;padding:0;overflow-y:auto;width:100%;display:flex;align-items:center;justify-content:center;}`};function Ra(r,t){F(t,!1),_e(r,Ba);const e={loaded:!1,conversation_name:"New Chat",conversation_id:null};let a=ne(structuredClone(e)),s=ne(),l;be(()=>{window.logger.logMessage("[Main Page]: Main page mounted")});async function o(){let f=document.querySelector(".chat-input input"),C=f.value;if(C.trim()==="")return;await z(),l=v(s).self;let b=Date.now();const L={id:b,time:new Date(b).toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!1}),text:C,isloacal:!0};if(l&&l.addMessage)l.addMessage(L);else throw window.logger.logMessage(`[Main Page]: Unable to load message on the chat
      subpage: subpage reference is not defined`),new Error("Chat subpage reference is not defined");f.value=""}let g=`Lorem ipsum dolor sit amet,
  consectetur adipiscing elit, sed do eiusmod
  tempor incididunt ut labore et dolore magna aliqua.
  Ut enim ad minim veniam, quis nostrud exercitation ullamco
  laboris nisi ut aliquip ex ea commodo consequat. Duis
  aute irure dolor in reprehenderit in voluptate velit esse
  cillum dolore eu fugiat nulla pariatur. Excepteur sint
  occaecat cupidatat non proident, sunt in culpa qui
  officia deserunt mollit anim id est laborum.`;async function _(){let f=[{id:"1",text:g,isloacal:!1},{id:"2",text:"Hi! How are you?",isloacal:!0}];Me(a,v(a).loaded=!0),Me(a,v(a).conversation_name="Conversation 1"),await z(),l=v(s).self,l&&l.switchMessages?l.switchMessages(f):console.error("switchMessagesRef is not defined")}function h(){S(a,structuredClone(e))}He();var y=za(),N=E(y),i=E(N),w=P(E(i),2),d=E(w);d.__click=_,d.__keydown=f=>f.key==="Enter"&&_(),T(w);var c=P(w,2);c.__click=h,c.__keydown=f=>f.key==="Enter"&&h();var u=E(c);Be(u),ue(2),T(c),T(i);var A=P(i,2),Z=E(A),m=E(Z,!0);T(Z);var D=P(Z,2);{var x=f=>{var C=Aa(),b=J(C),L=E(b);Ce(ze(L,{$$legacy:!0}),G=>S(s,G),()=>v(s)),T(b);var n=P(b,2),p=E(n);p.__keydown=G=>G.key==="Enter"&&o();var q=P(p,2);q.__click=o;var k=E(q);Oe(k),ue(),T(q);var $=P(q,2);$.__click=o;var H=E($);Re(H),ue(),T($),T(n),M(f,C)},I=f=>{var C=La(),b=E(C);Ce(Le(b,{$$legacy:!0}),L=>S(s,L),()=>v(s)),T(C),M(f,C)};V(D,f=>{v(a).loaded?f(x):f(I,!1)})}T(A),T(N),T(y),W(()=>j(m,v(a).conversation_name)),M(r,y),Y()}Ze(["click","keydown"]);B(Ra,{},[],[],!0);export{Ra as component};
